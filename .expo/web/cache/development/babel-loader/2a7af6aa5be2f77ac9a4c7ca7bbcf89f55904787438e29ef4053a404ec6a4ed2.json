{"ast":null,"code":"var _defineProperty = require(\"@babel/runtime/helpers/defineProperty\");\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nvar express = require('express');\nvar cors = require('cors');\nvar helmet = require('helmet');\nvar morgan = require('morgan');\nrequire('dotenv').config();\nvar authRoutes = require(\"./routes/auth\");\nvar userRoutes = require(\"./routes/users\");\nvar sportRoutes = require(\"./routes/sports\");\nvar contentRoutes = require(\"./routes/contents\");\nvar scoreRoutes = require(\"./routes/scores\");\nvar chatRoutes = require(\"./routes/chat\");\nvar classRoutes = require(\"./routes/classes\");\nvar app = express();\nvar PORT = process.env.PORT || 3001;\napp.use(helmet());\napp.use(cors({\n  origin: process.env.NODE_ENV === 'production' ? ['https://yourdomain.com'] : ['http://localhost:19006', 'http://localhost:19007'],\n  credentials: true\n}));\napp.use(morgan('combined'));\napp.use(express.json({\n  limit: '10mb'\n}));\napp.use(express.urlencoded({\n  extended: true\n}));\napp.get('/health', function (req, res) {\n  res.json({\n    status: 'OK',\n    timestamp: new Date().toISOString(),\n    environment: process.env.NODE_ENV || 'development'\n  });\n});\napp.use('/api/auth', authRoutes);\napp.use('/api/users', userRoutes);\napp.use('/api/sports', sportRoutes);\napp.use('/api/contents', contentRoutes);\napp.use('/api/scores', scoreRoutes);\napp.use('/api/chat', chatRoutes);\napp.use('/api/classes', classRoutes);\napp.use(function (err, req, res, next) {\n  console.error('Error:', err);\n  if (err.name === 'ValidationError') {\n    return res.status(400).json({\n      success: false,\n      message: 'Dados inválidos',\n      errors: err.details\n    });\n  }\n  if (err.name === 'UnauthorizedError') {\n    return res.status(401).json({\n      success: false,\n      message: 'Token inválido ou expirado'\n    });\n  }\n  res.status(500).json(_objectSpread({\n    success: false,\n    message: 'Erro interno do servidor'\n  }, process.env.NODE_ENV === 'development' && {\n    error: err.message\n  }));\n});\napp.use(function (req, res) {\n  res.status(404).json({\n    success: false,\n    message: 'Endpoint não encontrado'\n  });\n});\napp.listen(PORT, function () {\n  console.log(`🚀 Servidor rodando na porta ${PORT}`);\n  console.log(`📊 Health check: http://localhost:${PORT}/health`);\n  console.log(`🌍 Ambiente: ${process.env.NODE_ENV || 'development'}`);\n});\nmodule.exports = app;","map":{"version":3,"names":["express","require","cors","helmet","morgan","config","authRoutes","userRoutes","sportRoutes","contentRoutes","scoreRoutes","chatRoutes","classRoutes","app","PORT","process","env","use","origin","NODE_ENV","credentials","json","limit","urlencoded","extended","get","req","res","status","timestamp","Date","toISOString","environment","err","next","console","error","name","success","message","errors","details","_objectSpread","listen","log","module","exports"],"sources":["C:/Users/lukag/OneDrive/Área de Trabalho/Muvz_App/api/server.js"],"sourcesContent":["const express = require('express');\r\nconst cors = require('cors');\r\nconst helmet = require('helmet');\r\nconst morgan = require('morgan');\r\nrequire('dotenv').config();\r\n\r\nconst authRoutes = require('./routes/auth');\r\nconst userRoutes = require('./routes/users');\r\nconst sportRoutes = require('./routes/sports');\r\nconst contentRoutes = require('./routes/contents');\r\nconst scoreRoutes = require('./routes/scores');\r\nconst chatRoutes = require('./routes/chat');\r\nconst classRoutes = require('./routes/classes');\r\n\r\nconst app = express();\r\nconst PORT = process.env.PORT || 3001;\r\n\r\n// Middleware\r\napp.use(helmet());\r\napp.use(cors({\r\n  origin: process.env.NODE_ENV === 'production' \r\n    ? ['https://yourdomain.com'] \r\n    : ['http://localhost:19006', 'http://localhost:19007'],\r\n  credentials: true\r\n}));\r\napp.use(morgan('combined'));\r\napp.use(express.json({ limit: '10mb' }));\r\napp.use(express.urlencoded({ extended: true }));\r\n\r\n// Health check\r\napp.get('/health', (req, res) => {\r\n  res.json({ \r\n    status: 'OK', \r\n    timestamp: new Date().toISOString(),\r\n    environment: process.env.NODE_ENV || 'development'\r\n  });\r\n});\r\n\r\n// Routes\r\napp.use('/api/auth', authRoutes);\r\napp.use('/api/users', userRoutes);\r\napp.use('/api/sports', sportRoutes);\r\napp.use('/api/contents', contentRoutes);\r\napp.use('/api/scores', scoreRoutes);\r\napp.use('/api/chat', chatRoutes);\r\napp.use('/api/classes', classRoutes);\r\n\r\n// Error handling middleware\r\napp.use((err, req, res, next) => {\r\n  console.error('Error:', err);\r\n  \r\n  if (err.name === 'ValidationError') {\r\n    return res.status(400).json({\r\n      success: false,\r\n      message: 'Dados inválidos',\r\n      errors: err.details\r\n    });\r\n  }\r\n\r\n  if (err.name === 'UnauthorizedError') {\r\n    return res.status(401).json({\r\n      success: false,\r\n      message: 'Token inválido ou expirado'\r\n    });\r\n  }\r\n\r\n  res.status(500).json({\r\n    success: false,\r\n    message: 'Erro interno do servidor',\r\n    ...(process.env.NODE_ENV === 'development' && { error: err.message })\r\n  });\r\n});\r\n\r\n// 404 handler\r\napp.use((req, res) => {\r\n  res.status(404).json({\r\n    success: false,\r\n    message: 'Endpoint não encontrado'\r\n  });\r\n});\r\n\r\napp.listen(PORT, () => {\r\n  console.log(`🚀 Servidor rodando na porta ${PORT}`);\r\n  console.log(`📊 Health check: http://localhost:${PORT}/health`);\r\n  console.log(`🌍 Ambiente: ${process.env.NODE_ENV || 'development'}`);\r\n});\r\n\r\nmodule.exports = app;\r\n"],"mappings":";;;AAAA,IAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,IAAMC,IAAI,GAAGD,OAAO,CAAC,MAAM,CAAC;AAC5B,IAAME,MAAM,GAAGF,OAAO,CAAC,QAAQ,CAAC;AAChC,IAAMG,MAAM,GAAGH,OAAO,CAAC,QAAQ,CAAC;AAChCA,OAAO,CAAC,QAAQ,CAAC,CAACI,MAAM,CAAC,CAAC;AAE1B,IAAMC,UAAU,GAAGL,OAAO,gBAAgB,CAAC;AAC3C,IAAMM,UAAU,GAAGN,OAAO,iBAAiB,CAAC;AAC5C,IAAMO,WAAW,GAAGP,OAAO,kBAAkB,CAAC;AAC9C,IAAMQ,aAAa,GAAGR,OAAO,oBAAoB,CAAC;AAClD,IAAMS,WAAW,GAAGT,OAAO,kBAAkB,CAAC;AAC9C,IAAMU,UAAU,GAAGV,OAAO,gBAAgB,CAAC;AAC3C,IAAMW,WAAW,GAAGX,OAAO,mBAAmB,CAAC;AAE/C,IAAMY,GAAG,GAAGb,OAAO,CAAC,CAAC;AACrB,IAAMc,IAAI,GAAGC,OAAO,CAACC,GAAG,CAACF,IAAI,IAAI,IAAI;AAGrCD,GAAG,CAACI,GAAG,CAACd,MAAM,CAAC,CAAC,CAAC;AACjBU,GAAG,CAACI,GAAG,CAACf,IAAI,CAAC;EACXgB,MAAM,EAAEH,OAAO,CAACC,GAAG,CAACG,QAAQ,KAAK,YAAY,GACzC,CAAC,wBAAwB,CAAC,GAC1B,CAAC,wBAAwB,EAAE,wBAAwB,CAAC;EACxDC,WAAW,EAAE;AACf,CAAC,CAAC,CAAC;AACHP,GAAG,CAACI,GAAG,CAACb,MAAM,CAAC,UAAU,CAAC,CAAC;AAC3BS,GAAG,CAACI,GAAG,CAACjB,OAAO,CAACqB,IAAI,CAAC;EAAEC,KAAK,EAAE;AAAO,CAAC,CAAC,CAAC;AACxCT,GAAG,CAACI,GAAG,CAACjB,OAAO,CAACuB,UAAU,CAAC;EAAEC,QAAQ,EAAE;AAAK,CAAC,CAAC,CAAC;AAG/CX,GAAG,CAACY,GAAG,CAAC,SAAS,EAAE,UAACC,GAAG,EAAEC,GAAG,EAAK;EAC/BA,GAAG,CAACN,IAAI,CAAC;IACPO,MAAM,EAAE,IAAI;IACZC,SAAS,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC;IACnCC,WAAW,EAAEjB,OAAO,CAACC,GAAG,CAACG,QAAQ,IAAI;EACvC,CAAC,CAAC;AACJ,CAAC,CAAC;AAGFN,GAAG,CAACI,GAAG,CAAC,WAAW,EAAEX,UAAU,CAAC;AAChCO,GAAG,CAACI,GAAG,CAAC,YAAY,EAAEV,UAAU,CAAC;AACjCM,GAAG,CAACI,GAAG,CAAC,aAAa,EAAET,WAAW,CAAC;AACnCK,GAAG,CAACI,GAAG,CAAC,eAAe,EAAER,aAAa,CAAC;AACvCI,GAAG,CAACI,GAAG,CAAC,aAAa,EAAEP,WAAW,CAAC;AACnCG,GAAG,CAACI,GAAG,CAAC,WAAW,EAAEN,UAAU,CAAC;AAChCE,GAAG,CAACI,GAAG,CAAC,cAAc,EAAEL,WAAW,CAAC;AAGpCC,GAAG,CAACI,GAAG,CAAC,UAACgB,GAAG,EAAEP,GAAG,EAAEC,GAAG,EAAEO,IAAI,EAAK;EAC/BC,OAAO,CAACC,KAAK,CAAC,QAAQ,EAAEH,GAAG,CAAC;EAE5B,IAAIA,GAAG,CAACI,IAAI,KAAK,iBAAiB,EAAE;IAClC,OAAOV,GAAG,CAACC,MAAM,CAAC,GAAG,CAAC,CAACP,IAAI,CAAC;MAC1BiB,OAAO,EAAE,KAAK;MACdC,OAAO,EAAE,iBAAiB;MAC1BC,MAAM,EAAEP,GAAG,CAACQ;IACd,CAAC,CAAC;EACJ;EAEA,IAAIR,GAAG,CAACI,IAAI,KAAK,mBAAmB,EAAE;IACpC,OAAOV,GAAG,CAACC,MAAM,CAAC,GAAG,CAAC,CAACP,IAAI,CAAC;MAC1BiB,OAAO,EAAE,KAAK;MACdC,OAAO,EAAE;IACX,CAAC,CAAC;EACJ;EAEAZ,GAAG,CAACC,MAAM,CAAC,GAAG,CAAC,CAACP,IAAI,CAAAqB,aAAA;IAClBJ,OAAO,EAAE,KAAK;IACdC,OAAO,EAAE;EAA0B,GAC/BxB,OAAO,CAACC,GAAG,CAACG,QAAQ,KAAK,aAAa,IAAI;IAAEiB,KAAK,EAAEH,GAAG,CAACM;EAAQ,CAAC,CACrE,CAAC;AACJ,CAAC,CAAC;AAGF1B,GAAG,CAACI,GAAG,CAAC,UAACS,GAAG,EAAEC,GAAG,EAAK;EACpBA,GAAG,CAACC,MAAM,CAAC,GAAG,CAAC,CAACP,IAAI,CAAC;IACnBiB,OAAO,EAAE,KAAK;IACdC,OAAO,EAAE;EACX,CAAC,CAAC;AACJ,CAAC,CAAC;AAEF1B,GAAG,CAAC8B,MAAM,CAAC7B,IAAI,EAAE,YAAM;EACrBqB,OAAO,CAACS,GAAG,CAAC,gCAAgC9B,IAAI,EAAE,CAAC;EACnDqB,OAAO,CAACS,GAAG,CAAC,qCAAqC9B,IAAI,SAAS,CAAC;EAC/DqB,OAAO,CAACS,GAAG,CAAC,gBAAgB7B,OAAO,CAACC,GAAG,CAACG,QAAQ,IAAI,aAAa,EAAE,CAAC;AACtE,CAAC,CAAC;AAEF0B,MAAM,CAACC,OAAO,GAAGjC,GAAG","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}