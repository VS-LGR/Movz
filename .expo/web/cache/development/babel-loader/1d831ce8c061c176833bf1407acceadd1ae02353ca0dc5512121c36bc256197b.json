{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useEffect } from 'react';\nimport { StatusBar } from 'expo-status-bar';\nimport apiService from \"./apiService\";\nimport LoginScreen from \"./LoginScreen\";\nimport HomeScreen from \"./HomeScreen\";\nimport RankingScreen from \"./RankingScreen\";\nimport TutorialScreen from \"./TutorialScreen\";\nimport ChatScreen from \"./ChatScreen\";\nimport RegisterScreen from \"./RegisterScreen\";\nimport { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function App() {\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    isAuthenticated = _useState2[0],\n    setIsAuthenticated = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    currentUser = _useState4[0],\n    setCurrentUser = _useState4[1];\n  var _useState5 = useState('home'),\n    _useState6 = _slicedToArray(_useState5, 2),\n    currentScreen = _useState6[0],\n    setCurrentScreen = _useState6[1];\n  var _useState7 = useState(false),\n    _useState8 = _slicedToArray(_useState7, 2),\n    isMenuVisible = _useState8[0],\n    setIsMenuVisible = _useState8[1];\n  var _useState9 = useState(true),\n    _useState0 = _slicedToArray(_useState9, 2),\n    isLoading = _useState0[0],\n    setIsLoading = _useState0[1];\n  useEffect(function () {\n    checkAuthStatus();\n  }, []);\n  var checkAuthStatus = function () {\n    var _ref = _asyncToGenerator(function* () {\n      try {\n        var token = yield Storage.getItem('authToken');\n        if (token) {\n          apiService.setToken(token);\n          var response = yield apiService.verifyToken();\n          if (response.success) {\n            setCurrentUser(response.data.user);\n            setIsAuthenticated(true);\n          } else {\n            yield Storage.removeItem('authToken');\n            apiService.clearToken();\n          }\n        }\n      } catch (error) {\n        console.error('Error checking auth status:', error);\n        yield Storage.removeItem('authToken');\n        apiService.clearToken();\n      } finally {\n        setIsLoading(false);\n      }\n    });\n    return function checkAuthStatus() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  var handleLogin = function () {\n    var _ref2 = _asyncToGenerator(function* (userData) {\n      try {\n        var response = yield apiService.login(userData.email, userData.password);\n        if (response.success) {\n          yield Storage.setItem('authToken', response.data.token);\n          apiService.setToken(response.data.token);\n          setCurrentUser(response.data.user);\n          setIsAuthenticated(true);\n          setCurrentScreen('home');\n        }\n      } catch (error) {\n        console.error('Login error:', error);\n        throw error;\n      }\n    });\n    return function handleLogin(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var handleRegister = function () {\n    var _ref3 = _asyncToGenerator(function* (userData) {\n      try {\n        var response = yield apiService.register(userData);\n        if (response.success) {\n          yield Storage.setItem('authToken', response.data.token);\n          apiService.setToken(response.data.token);\n          setCurrentUser(response.data.user);\n          setIsAuthenticated(true);\n          setCurrentScreen('home');\n        }\n      } catch (error) {\n        console.error('Register error:', error);\n        throw error;\n      }\n    });\n    return function handleRegister(_x2) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var handleLogout = function () {\n    var _ref4 = _asyncToGenerator(function* () {\n      try {\n        yield apiService.logout();\n        yield Storage.removeItem('authToken');\n        apiService.clearToken();\n        setCurrentUser(null);\n        setIsAuthenticated(false);\n        setCurrentScreen('home');\n      } catch (error) {\n        console.error('Error logging out:', error);\n      }\n    });\n    return function handleLogout() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n  var navigateToScreen = function navigateToScreen(screen) {\n    setCurrentScreen(screen);\n    setIsMenuVisible(false);\n  };\n  var navigateToRegister = function navigateToRegister() {\n    setCurrentScreen('register');\n  };\n  var renderScreen = function renderScreen() {\n    if (isLoading) {\n      return null;\n    }\n    if (!isAuthenticated) {\n      if (currentScreen === 'register') {\n        return _jsx(RegisterScreen, {\n          onRegister: handleRegister,\n          onNavigateToLogin: function onNavigateToLogin() {\n            return setCurrentScreen('login');\n          }\n        });\n      }\n      return _jsx(LoginScreen, {\n        onLogin: handleLogin,\n        onNavigateToRegister: navigateToRegister\n      });\n    }\n    switch (currentScreen) {\n      case 'ranking':\n        return _jsx(RankingScreen, {\n          isMenuVisible: isMenuVisible,\n          setIsMenuVisible: setIsMenuVisible,\n          onNavigate: navigateToScreen,\n          currentUser: currentUser\n        });\n      case 'tutorial':\n        return _jsx(TutorialScreen, {\n          isMenuVisible: isMenuVisible,\n          setIsMenuVisible: setIsMenuVisible,\n          onNavigate: navigateToScreen,\n          currentUser: currentUser\n        });\n      case 'chat':\n        return _jsx(ChatScreen, {\n          isMenuVisible: isMenuVisible,\n          setIsMenuVisible: setIsMenuVisible,\n          onNavigate: navigateToScreen,\n          currentUser: currentUser\n        });\n      case 'register':\n        return _jsx(RegisterScreen, {\n          isMenuVisible: isMenuVisible,\n          setIsMenuVisible: setIsMenuVisible,\n          onNavigate: navigateToScreen,\n          onRegister: handleRegister,\n          currentUser: currentUser\n        });\n      default:\n        return _jsx(HomeScreen, {\n          isMenuVisible: isMenuVisible,\n          setIsMenuVisible: setIsMenuVisible,\n          onNavigate: navigateToScreen,\n          currentUser: currentUser,\n          onLogout: handleLogout\n        });\n    }\n  };\n  return _jsxs(_Fragment, {\n    children: [_jsx(StatusBar, {\n      style: \"dark\",\n      backgroundColor: \"#E9EEEE\"\n    }), renderScreen()]\n  });\n}","map":{"version":3,"names":["React","useState","useEffect","StatusBar","apiService","LoginScreen","HomeScreen","RankingScreen","TutorialScreen","ChatScreen","RegisterScreen","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","App","_useState","_useState2","_slicedToArray","isAuthenticated","setIsAuthenticated","_useState3","_useState4","currentUser","setCurrentUser","_useState5","_useState6","currentScreen","setCurrentScreen","_useState7","_useState8","isMenuVisible","setIsMenuVisible","_useState9","_useState0","isLoading","setIsLoading","checkAuthStatus","_ref","_asyncToGenerator","token","Storage","getItem","setToken","response","verifyToken","success","data","user","removeItem","clearToken","error","console","apply","arguments","handleLogin","_ref2","userData","login","email","password","setItem","_x","handleRegister","_ref3","register","_x2","handleLogout","_ref4","logout","navigateToScreen","screen","navigateToRegister","renderScreen","onRegister","onNavigateToLogin","onLogin","onNavigateToRegister","onNavigate","onLogout","children","style","backgroundColor"],"sources":["C:/Users/lukag/OneDrive/Área de Trabalho/Muvz_App/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { StatusBar } from 'expo-status-bar';\nimport apiService from './apiService';\nimport LoginScreen from './LoginScreen';\nimport HomeScreen from './HomeScreen';\nimport RankingScreen from './RankingScreen';\nimport TutorialScreen from './TutorialScreen';\nimport ChatScreen from './ChatScreen';\nimport RegisterScreen from './RegisterScreen';\n\nexport default function App() {\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [currentUser, setCurrentUser] = useState(null);\n  const [currentScreen, setCurrentScreen] = useState('home');\n  const [isMenuVisible, setIsMenuVisible] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n\n  // Verificar se há usuário logado ao iniciar o app\n  useEffect(() => {\n    checkAuthStatus();\n  }, []);\n\n  const checkAuthStatus = async () => {\n    try {\n      // Verificar se há token salvo\n      const token = await Storage.getItem('authToken');\n      if (token) {\n        apiService.setToken(token);\n        \n        // Verificar se o token ainda é válido\n        const response = await apiService.verifyToken();\n        if (response.success) {\n          setCurrentUser(response.data.user);\n          setIsAuthenticated(true);\n        } else {\n          // Token inválido, limpar\n          await Storage.removeItem('authToken');\n          apiService.clearToken();\n        }\n      }\n    } catch (error) {\n      console.error('Error checking auth status:', error);\n      // Em caso de erro, limpar token\n      await Storage.removeItem('authToken');\n      apiService.clearToken();\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleLogin = async (userData) => {\n    try {\n      const response = await apiService.login(userData.email, userData.password);\n      if (response.success) {\n        // Salvar token\n        await Storage.setItem('authToken', response.data.token);\n        apiService.setToken(response.data.token);\n        \n        setCurrentUser(response.data.user);\n        setIsAuthenticated(true);\n        setCurrentScreen('home');\n      }\n    } catch (error) {\n      console.error('Login error:', error);\n      throw error;\n    }\n  };\n\n  const handleRegister = async (userData) => {\n    try {\n      const response = await apiService.register(userData);\n      if (response.success) {\n        // Salvar token\n        await Storage.setItem('authToken', response.data.token);\n        apiService.setToken(response.data.token);\n        \n        setCurrentUser(response.data.user);\n        setIsAuthenticated(true);\n        setCurrentScreen('home');\n      }\n    } catch (error) {\n      console.error('Register error:', error);\n      throw error;\n    }\n  };\n\n  const handleLogout = async () => {\n    try {\n      await apiService.logout();\n      await Storage.removeItem('authToken');\n      apiService.clearToken();\n      \n      setCurrentUser(null);\n      setIsAuthenticated(false);\n      setCurrentScreen('home');\n    } catch (error) {\n      console.error('Error logging out:', error);\n    }\n  };\n\n  const navigateToScreen = (screen) => {\n    setCurrentScreen(screen);\n    setIsMenuVisible(false);\n  };\n\n  const navigateToRegister = () => {\n    setCurrentScreen('register');\n  };\n\n  const renderScreen = () => {\n    if (isLoading) {\n      return null; // Ou um componente de loading\n    }\n\n    if (!isAuthenticated) {\n      if (currentScreen === 'register') {\n        return <RegisterScreen onRegister={handleRegister} onNavigateToLogin={() => setCurrentScreen('login')} />;\n      }\n      return <LoginScreen onLogin={handleLogin} onNavigateToRegister={navigateToRegister} />;\n    }\n\n    switch (currentScreen) {\n      case 'ranking':\n        return <RankingScreen isMenuVisible={isMenuVisible} setIsMenuVisible={setIsMenuVisible} onNavigate={navigateToScreen} currentUser={currentUser} />;\n      case 'tutorial':\n        return <TutorialScreen isMenuVisible={isMenuVisible} setIsMenuVisible={setIsMenuVisible} onNavigate={navigateToScreen} currentUser={currentUser} />;\n      case 'chat':\n        return <ChatScreen isMenuVisible={isMenuVisible} setIsMenuVisible={setIsMenuVisible} onNavigate={navigateToScreen} currentUser={currentUser} />;\n      case 'register':\n        return <RegisterScreen isMenuVisible={isMenuVisible} setIsMenuVisible={setIsMenuVisible} onNavigate={navigateToScreen} onRegister={handleRegister} currentUser={currentUser} />;\n      default:\n        return <HomeScreen isMenuVisible={isMenuVisible} setIsMenuVisible={setIsMenuVisible} onNavigate={navigateToScreen} currentUser={currentUser} onLogout={handleLogout} />;\n    }\n  };\n\n  return (\n    <>\n      <StatusBar style=\"dark\" backgroundColor=\"#E9EEEE\" />\n      {renderScreen()}\n    </>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}